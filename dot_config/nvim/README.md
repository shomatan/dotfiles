# Neovim設定

LazyVimベースのNeovim設定です。

## キーバインド

### カスタムキーバインド

| キー | 動作 | プラグイン |
|------|------|-----------|
| `1` | 行頭（最初の非空白文字）へ移動 | - |
| `2` | 行末へ移動 | - |
| `-` | 親ディレクトリを開く | Oil |
| `<leader>e` | Explorer (Oil) | Oil |
| `q` | Oilを閉じる | Oil |
| `<leader>aa` | Claude Codeを開く | Sidekick |

### LazyVimデフォルト（よく使うもの）

#### ファイル操作
| キー | 動作 |
|------|------|
| `<leader><leader>` | ファイル検索 |
| `<leader>ff` | ファイル検索 |
| `<leader>fr` | 最近のファイル |
| `<leader>fb` | バッファ検索 |

#### Telescope（ファイル選択時）
| キー | 動作 |
|------|------|
| `Enter` | 新しいタブで開く |
| `<C-t>` | 現在のウィンドウで開く |
| `<C-x>` | 水平分割で開く |
| `<C-v>` | 垂直分割で開く |

#### 検索
| キー | 動作 |
|------|------|
| `<leader>sg` | 文字列検索（grep） |
| `<leader>sw` | カーソル下の単語を検索 |
| `<leader>/` | バッファ内検索 |
| `<leader>:` | コマンド履歴 |

#### バッファ操作
| キー | 動作 |
|------|------|
| `<S-n>` | 次のバッファ（WezTermと統一） |
| `<S-p>` | 前のバッファ（WezTermと統一） |
| `<leader>,` | バッファ一覧 |
| `<leader>bb` | 直前のバッファに切り替え |
| `<leader>bd` | バッファを閉じる |

#### ウィンドウ操作（分割/ペイン）
| キー | 動作 |
|------|------|
| `<S-h/j/k/l>` | ウィンドウ間移動（WezTermと統一） |
| `<C-Up/Down/Left/Right>` | ウィンドウサイズ変更 |
| `<leader>-` | 水平分割 |
| `<leader>\|` | 垂直分割 |
| `<leader>wd` | ウィンドウを閉じる |
| `<leader>wm` | ウィンドウ最大化トグル |
| `<C-w>=` | ウィンドウサイズを均等に |
| `<C-w>o` | 他のウィンドウをすべて閉じる |
| `<C-w>r` | ウィンドウ位置を回転 |
| `<C-w>x` | 隣のウィンドウと入れ替え |

#### タブ操作
| キー | 動作 |
|------|------|
| `<leader><tab><tab>` | 新規タブ |
| `<leader><tab>d` | タブを閉じる |
| `<leader><tab>]` | 次のタブ |
| `<leader><tab>[` | 前のタブ |
| `<leader><tab>l` | 最後のタブ |
| `<leader><tab>f` | 最初のタブ |
| `gt` | 次のタブ |
| `gT` | 前のタブ |

#### LSP / コード
| キー | 動作 |
|------|------|
| `gd` | 定義へジャンプ |
| `gr` | 参照検索 |
| `<leader>k` | ドキュメント表示（ホバー） |
| `<leader>ca` | コードアクション |
| `<leader>cr` | リネーム |

#### Git
| キー | 動作 |
|------|------|
| `<leader>gg` | Lazygit |
| `<leader>gb` | Git blame |

#### Flutter（`<leader>df` プレフィックス）
| キー | 動作 |
|------|------|
| `<leader>dfr` | Flutter Run |
| `<leader>dfR` | Flutter Restart |
| `<leader>dfl` | Flutter Reload (Hot) |
| `<leader>dfq` | Flutter Quit |
| `<leader>dfd` | Flutter Devices |
| `<leader>dfe` | Flutter Emulators |
| `<leader>dfo` | Flutter Outline |
| `<leader>dft` | Flutter DevTools |

#### ターミナル
| キー | 動作 |
|------|------|
| `<C-/>` | ターミナル（トグル） |
| `<leader>ft` | フローティングターミナル |
| `<C-g><C-g>` | ターミナルモードから抜ける（分割キーボード向け） |
| `<C-q>` | AIビューを閉じる |

#### その他
| キー | 動作 |
|------|------|
| `<leader>xx` | 診断一覧 (Trouble) |
| `<leader>qs` | セッション保存 |
| `<leader>qr` | セッション復元 |

## Oil.nvim（ファイラー）

neo-treeを無効化し、oil.nvimを使用。バッファのようにファイルシステムを編集可能。

### 起動

| キー | 機能 |
|------|------|
| `-` | 親ディレクトリを開く |
| `<leader>e` | ファイラーを開く |

### ナビゲーション

| キー | 機能 | 備考 |
|------|------|------|
| `Enter` | ファイル/ディレクトリを開く ||
| `-` | 親ディレクトリへ移動 ||
| `_` | カレントワーキングディレクトリを開く ||

### ウィンドウ操作

| キー | 機能 | 備考 |
|------|------|------|
| `<C-s>` | 垂直分割で開く ||
| `<C-t>` | 新しいタブで開く ||
| `<C-p>` | プレビュー表示 ||
| `<C-h>` | ~~水平分割~~ | 無効化（ウィンドウ移動優先） |
| `<C-l>` | ~~リフレッシュ~~ | 無効化（ウィンドウ移動優先） |

### バッファ操作

| キー | 機能 |
|------|------|
| `q` | 閉じる（カスタム） |
| `<C-c>` | 閉じる |

### ディレクトリ変更

| キー | 機能 |
|------|------|
| `` ` `` | `:cd` を実行（グローバル） |
| `~` | `:tcd` を実行（タブローカル） |

### 表示切り替え

| キー | 機能 |
|------|------|
| `g.` | 隠しファイルの表示/非表示切替 |
| `gs` | ソート順を変更 |
| `g\` | ゴミ箱表示の切替 |
| `g?` | ヘルプ（キーバインド一覧）を表示 |
| `gx` | 外部アプリで開く |

### ファイル操作（バッファ編集）

| 操作 | 方法 |
|------|------|
| 作成 | 新しい行に名前を入力 → `:w` |
| 削除 | `dd` で行削除 → `:w` |
| リネーム | ファイル名を編集 → `:w` |
| 移動 | `dd` → 移動先で `p` → `:w` |
| コピー | `yy` → 移動先で `p` → `:w` |

## オートセーブ

編集後に自動保存。Oilバッファは除外されるため安全。

| コマンド | 動作 |
|---------|------|
| `:AutoSaveToggle` | オートセーブのオン/オフ切り替え |

## プラグイン構成

- **Oil.nvim**: ファイルエクスプローラー（neo-tree無効化）
- **Sidekick.nvim**: Claude Code連携
- **Flutter-tools.nvim**: Flutter/Dart開発環境
- **auto-save.nvim**: オートセーブ（Oil除外）
